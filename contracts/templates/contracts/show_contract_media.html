{%extends 'base.html'%}
{%load bootstrap%}
{%load static%}
{% block title %}Umowa z dnia {{contract.date|date:"d.m.Y"}} r. {%endblock%}
{%block content%}

<div class="row">
    {%if actual%}
    <div class="col-md-2 moj-button-left"><a href="{%url 'contracts:create_contract_media_list'%}">
    <button class="btn btn-outline-primary my-btn"><span class="bi bi-chevron-compact-left">Cofnij</span></button>
</a>
</div>
    {%else%}
    <div class="col-md-2 moj-button-left"><a href="{%url 'contracts:menu_contractsimmovables_archive'%}">
    <button class="btn btn-outline-primary my-btn"><span class="bi bi-chevron-compact-left">Cofnij</span></button>
</a>
</div>
    {%endif%}

<div class=" col-md-8">
<h4 class="text-center" title="Ostatnie zmiany na umowie: {{contract.change|date:'d.m.Y - (H:i)'}}">Umowa {%if contract.no_contract%} nr {{contract.no_contract}} {%endif%} z dnia
    {{contract.date|date:"d.m.Y"}} r.</h4>
    </div>

</div>
<div class="container px-5 pb-5 col-md-10">
    <div class="row mt-2">
        <div class="col-md-9">
            <ul class="list-group list-group-flush">
                <li class="list-group-item"><span class="text-muted">Kontrahent: </span><span>{{contract.contractor}}</span></li>
                <li class="list-group-item"><span class="text-muted">Zakres umowy: </span><span>{{contract.content}}</span></li>
                <li class="list-group-item"><span class="text-muted">Rodzaj umowy: </span><span>{{contract.type}}</span></li>
                <li class="list-group-item"><span class="text-muted">Okres obowiązywania: </span><span>{%if contract.period_of_validity%} {{contract.period_of_validity|date:"d.m.Y"}} r.{%else%} --- {%endif%}</span></li>
<!--                {%if contract.period_of_validity%}-->
<!--        {% now 'Y-m-d' as today_date%}-->
<!--        {%if contract.period_of_validity|date:'Y-m-d' <= today_date%}-->
<!--        <td align="center" valign="middle" class="text-center bg-danger text-white"><span>{{contract.period_of_validity|date:"d.m.Y"}}&nbsp;r.</span></td>-->
<!--        {%else%}-->
<!--        <td align="center" valign="middle" class="text-center">{{contract.period_of_validity|default_if_none:'-&#45;&#45;'|date:"d.m.Y"}}&nbsp;r.</td>-->
<!--        {%endif%}-->
<!--        {%else%}-->
<!--        <td align="center" valign="middle" class="text-center">-&#45;&#45;</td>-->
<!--        {%endif%}-->
                <li class="list-group-item"><span class="text-muted">Jednostka: </span><ul>{%for unit in contract.unit.all%}<li><span> {{unit}}</span></li>{%endfor%}</ul></li>
                <li class="list-group-item"><span class="text-muted">Stan umowy: </span>{%if contract.state %}<span class="text-success">Aktualna</span>{%else%}<span class="text-danger">Rozwiązana</span> {%endif%}
                </li>
                {%if contract.information%}
                <li class="list-group-item"><span class="text-muted">Informacje: </span>{{contract.information}}</li>
                {%endif%}
                <li class="list-group-item"><span class="text-muted">Branżysta: </span>{{contract.employer}}</li>
                <li class="list-group-item"><small class="text-muted">Data dodania: {{contract.creation_date|date:'d.m.Y (H:i)'}}</small></li>
                <li class="list-group-item"><small class="text-muted">Zmiany: {{contract.change|date:'d.m.Y (H:i)'}} - {{contract.author}}</small></li>
            </ul>
        </div>
        <div class="col-md-3">
            <div class="text-center mt-2">
            {%if contract.scan%}
                <a href="/media/{{contract.scan}}" role="button" target="_blank"><button class="btn btn-outline-primary button-chose-invoices my-btn" type="button"><span class="bi bi-file-text"> Podgląd umowy</span></button></a>
            {%endif%}
            {%if annexes%}
            {%for annex in annexes%}
                <div class="my-3">
                    <a href="/media/{{annex.scan_annex}}" target="_blank">
                        <button class="btn btn-outline-primary button-chose-invoices my-btn">
                            <i class="bi bi-arrow-return-right"> Aneks z dnia {{annex.date_annex|date:"d.m.Y"}}&nbsp;r.</i>
                        </button>
                    </a>
                </div>
            {%endfor%}
            {%endif%}
            </div>
        </div>
    </div>
</div>
<script>
    document.getElementById("button-units").classList.remove("active");
    document.getElementById("button-record").classList.add("active");
    document.getElementById("button-cpv").classList.remove("active");
    document.getElementById("button-investments").classList.remove("active");
</script>
{%endblock%}